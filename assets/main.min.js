function getf(e,t){xhr=new XMLHttpRequest,xhr.open("GET",e),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.onload=function(){200===xhr.status&&xhr.responseText&&t(xhr.responseText)},xhr.send()}function s(){if(location.href.match(/\/orarend/g)){window.mh=0,$(".collection-item").css("height","unset");for(let e=$("ul"),t=0;e.length;e=$("ul.collection li:nth-child("+ ++t+")")){if(0==t)continue;let o=0;e.each(e=>{o=Math.max($(e).height(),o)}),e.css("height",o+"px")}}}function init(){let e=$(location.hash);if(e.length&&requestAnimationFrame(()=>{e[0].scrollIntoView()}),location.href.match(/\/orarend/g)){s();var t=$("#modal"),o=Modal(t);$(".lesson").on("click",function(e){$("#modal span").html("-");let n=$(this),i=n.find("b");t.find(".modal-content>span").html(i.is(".em")?"Elmarad!":"");let l=n.find("i");$(["lecke","time","theme"]).each(function(e){let o=l.attr(`data-${e}`);o&&t.find(`[data-${e}]`).html(o)}),t.find("[data-nth]").html(n.parent().attr("data-nth")),t.find("[data-tr]").html(i.html()),t.find("[data-teacher]").html(l.html()),t.find("[data-room]").html(n.find(".secondary-content").html()),o.open()})}Collapsible($(".collapsible")),location.href.match(/\/jegyek/g)&&e.closest("ntr").addClass("open"),$("[tooltip]").on("mouseenter",function(){$(this).toggleClass("bot",$(this).offset().top-window.scrollY-window.getComputedStyle(this,":after").getPropertyValue("height").replace("px","")-20<=0)})}function addCookie(e){var t=new Date;t.setDate(t.getDate()+365),document.cookie=`${e}=1;expires=${t.toUTCString()};path=/`}$(window).on("resize",s),location.href.match(/^(?=.*\/login)(?!.*(toldy|sch)).*/g)&&getf("schools",function(e){e=JSON.parse(e);let t=$("#sc"),o=t[0].list?$("#slc"):$("#rslc"),n=o.find("selected");n.length&&(n=n.val()),o.html(""),$(e).each(function(){o.append('<option value="'+this.v+'"'+(n==this.v?(n="","selected"):"")+">"+this.n+"</option>")}),t.on("blur",function(){if(!this.value)return;$("option[value="+this.value+"]").length?(this.setCustomValidity(""),M.validate_field($("#sc"))):this.setCustomValidity("Adjon meg egy érvényes értéket")})}),$.fn.ready(()=>{ic.on(init),ic.init("mousedown")});let g=$("#gdpr");g.length&&Modal(g,{opacity:0,dismissible:!1,preventScrolling:!1,onCloseEnd:function(){addCookie("gdpr")}}).open(),"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js",{scope:"/"}).then(function(){console.log("Service Worker Registered")});let p=$("#pwa");if(p.length){let e;window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),e=t,Modal(p,{opacity:0,preventScrolling:!1}).open(),$("#pwa-btn").on("click",()=>{e.prompt(),e.userChoice.then(t=>{"accepted"===t.outcome?(addCookie("pwa"),console.log("User accepted the A2HS prompt")):console.log("User dismissed the A2HS prompt"),e=null})})})}