!function(t){var e,n,o,i=navigator.userAgent,a={},l=!1,c=!1,s=!1,r=!1,d=!1,f=!1,u=!1;function p(t){return t.split("#")[0]}function m(t){let e=$(t).closest("a");return e.is()?e:$(t)}function g(t){let n=t[0];var o=location.protocol+"//"+location.host;return!(!t.is("a")||n.target||t.hasAttr("download")||0!=n.href.indexOf(o+"/")||0!=/login|addUser/.test(n)||p(n.href)==e||$(t).closest("[data-no-instant]").is())}function v(t,n,o){document.documentElement.replaceChild(n,document.body),e=p(o),history.pushState(null,null,o),document.title=t+String.fromCharCode(160),k(),w.done()}function y(t){if(o<+new Date-500){var e=m(t.target);e.is()&&g(e)&&C(e[0].href)}}function b(t){var e=m(t.target);e.is()&&g(e)&&(t.which>1||t.metaKey||t.ctrlKey||(t.preventDefault(),x(e[0].href)))}function k(){$("body").on("mousedown",y).on("click",b),D()}function C(t){t||(t=n),f||t==c||u||(f=!0,u=!1,c=t,d=!1,r=!1,t=addParam(t,"just_html"),(l=ajax(t,function(t){var e=document.implementation.createHTMLDocument("");e.documentElement.innerHTML=t,s=e.title,d=e.body;var n=p(c);a[n]={body:d,title:s,scrollY:n in a?a[n].scrollY:0},u&&(u=!1,x(c))},l)).onerror=function(){location.href=c})}function x(t){f?u?location.href=t:r?location.href=c:d?(a[e].scrollY=pageYOffset,f=!1,u=!1,v(s,d,c)):(w.start(0,!0),u=!0):(C(t),w.start(0,!0),u=!0)}var w=function(){var t,e,n,o;function i(){t=$("#ic"),e=$("#ic-bar")}function a(){n<98&&(n+=1+2*Math.random(),o=setTimeout(a,500)),l()}function l(){i(),e.css({transform:"translate("+n+"%)"})}return{start:function(e,c){i(),n=e,t.css({opacity:1}),l(),c&&requestAnimationFrame(function(){n=10,l()}),clearTimeout(o),o=setTimeout(a,500)},done:function(){clearTimeout(o),requestAnimationFrame(()=>{n=100,l(),t.css({opacity:0})})}}}(),M="pushState"in history&&(!i.match("Android")||i.match("Chrome/"));function T(){if(/\/orarend/.test(location.href)){$(".collection-item").css("height","unset");for(let t=$("ul"),e=0;t.is();t=$("ul.collection li:nth-child("+ ++e+")")){if(0==e)continue;let n=0;t.each(t=>{n=Math.max($(t).height(),n)}),t.css("height",n+"px")}$("#tt")[0].scrollTo(innerWidth*$("b.active").index(),0)}}const j=t=>Math.round(100*t)/100;function Y(t){let e=[],n=0;t.find(".jegy").each(t=>{let o=(t=$(t)).is("b")?1:t.attr("tooltip").indexOf("100%")<0?.25:.5,i=t.html();i.indexOf("/")<0?e.push(o*i):e.push(...i.split("/").map(t=>t*(o/2))),n+=o});let o=j(e.reduce((t,e)=>Number(t)+Number(e))/n),i=t.find("nd");diff=j(o-i.eq(-2).html()),i.eq(-1).html(diff).removeClass("red gr").addClass(diff<0?"red":"gr"),i.eq(-3).html(o),h=$(`[value="${i.eq(0).attr("data-v")}"]`),h.html([h.html().split(" - ").shift(),o].join(" - "))}function S(t,e,n,o,i){t.find("span").html("-"),$(n).each(function(n){let o=e.attr(`data-${n}`);o&&t.find(`[data-${n}]`).html(o)});for(let e in o)t.find(`[data-${e}]`).html(o[e]);i.open()}let q=!1,A=!1;function O(){A&&q||(scrolling=!0)}function D(){const e=$("#menu"),n=$(location.hash),i=location.href;if(n.is()&&(intoView(n[0]),$(n).find(".collapsible-body").addClass("open")),scrolling=!1,e.is()){let t=$("body"),n=!1,i=!1,r={x:0,y:0},d={x:0,y:0},h=0,f=!1,u=70,p=307,v=e.next();function a(t){e.css({transform:`translateX(${t})`})}function l(){v.show().css({opacity:""}),t.addClass("no-scroll"),a(0),e.addClass("open"),A=!0}function c(){v.hide(),t.removeClass("no-scroll"),a("-110%"),e.removeClass("open"),A=!1}function s(){i||($("#rle").css({top:""}),$("body").removeClass("spin"))}v.on("click",c),$("#mo").on("click",()=>{l()}),t.on("touchstart",function(t){if(1==t.touches.length){f=!1,q=!1,r.x=t.touches[0].pageX,r.y=t.touches[0].pageY,o=+new Date;var e=m(t.target);e.is()&&g(e)&&(e.off("mousedown",y),C(e[0].href))}}).on("touchmove",function(e){if(v.hide(),(q||A)&&v.show(),!scrolling||void 0!==e.touches||!Modal._modalsOpen){var o=e.touches[0].clientX-r.x,l=h=o;if((Math.abs(l)<p||r.x<50)&&Math.abs(o)>20&&(q=!0,!A&&o>0||A&&o<0)){o<=0&&(l=o+p,q=!1);let t=l-p;v.css({opacity:(280+t)/280*.2}),a(Math.min(t,0)+"px"),f=!0}if(n=0===document.scrollingElement.scrollTop&&!(A||q),t.toggleClass("no-scroll",n),n&&!i){const t=e.touches[0].pageY-r.y;$("#rle").css({top:Math.min(t,120)+"px"})}else s()}}).on("touchcancel",function(){f=!1,q=!1,scrolling=!1}).on("touchend",function(e){if(f&&(q&&Math.abs(h)>u?l():c()),f=!1,d.x=e.changedTouches[0].pageX,d.y=e.changedTouches[0].pageY,n){var o=Math.abs(r.y-d.y),a=Math.abs(r.x-d.x);!i&&r.y<d.y&&(a<=100&&o>=90||a/o<=.3&&o>=60)?(s(),t.addClass("spin"),i=!0,x(addParam(location.href,"fr"))):s(),n=!1}scrolling=!1})}if(/\/orarend/.test(i)){T();let t=$(`[data-day="${(new Date).toISOString().split("T")[0]}"]`),e=$("#modal"),o=Modal(e);t.is()&&(t.addClass("activeDay"),$("#tt")[0].scrollTo(t.index()*innerWidth,0)),$(".lesson").on("click",function(){let t=$(this),n=t.find("b");S(e,t,["lecke","time","theme"],{nth:t.parent().attr("data-nth"),tr:n.html(),teacher:t.find("i").html().replace(/span/g,"a"),room:t.find(".secondary-content").html()},o),$(".modal-content>span")[n.is(".em")?"show":"hide"]()}),$(".btns b").on("click",function(){let t=$(this);$("#tt")[0].scrollTo(innerWidth*t.index(),0),t.siblings().removeClass("active")});let i=null;$("#tt").on("scroll",()=>{clearTimeout(i),i=setTimeout(function(){$(".btns b").removeClass("active").eq(Math.round($("#tt")[0].scrollLeft/innerWidth)).addClass("active")},250),O()}),$("#printBtn").on("click",function(){print()}),n.is(".lesson")&&n[0].click()}if(/\/faliujsag/.test(i)&&$("#fj li").on("click",function(t){$(t.target).is("p, span, .collection-item")&&$(this).find(".secondary-content")[0].click()}),/\/lecke/.test(i)){$("[name=t]").on("change",function(){"date"==this.value?($("#hi").show(),$("#date").attr("required",!0)):($("#hi").hide(),$("#date")[0].removeAttribute("required"))});var r=$("#modal"),d=Modal(r);$(".collection-item").on("click",function(){let t=$(this),e=$("a").hide();t.hasAttr("data-del")&&e.show().attr("href","lecke/torles?did="+t.attr("data-del")),S(r,t,["lecke","sender","cdate"],{deadline:t.find("a").html(),tr:t.html().split("<")[0]},d)});var h=Modal("#addModal");$(".fab").on("click",function(){h.open()}),$("form").on("submit",function(){let t=$("#txt")[0],e=t.innerText.trim();return e?($("#hw").val(e),!0):(t.focus(),!1)})}if($(".collapsible .collapsible-header").on("click",function(){$(this).next().toggleClass("open")}),/\/hianyzasok/.test(i)){r=$("#modal"),d=Modal(r);$("li p").on("click",function(){let t=$(this),e=t.parent().prev();S(r,t,["ct","jst","t","s"],{d:e.find("span").html(),ty:e.attr("data-ty")},d),$("#link").attr("href",`orarend?week=-${t.attr("data-l")}`)})}if(/\/jegyek/.test(i)){n.closest("nr").addClass("open");let t=Modal("#addModal"),e=$("#tr");$(".fab").on("click",t.open),$("#tort").on("change",function(){$(".j").hide().eq(this.checked?1:0).show(),$(".j").find("input").each(t=>{t.checked=!1})}),$("#cnn").on("click",function(){let n=$("p.j>:checked").val();if(null!==n){let o=$(`[data-v="${e.val()}"]`).parent(),i=$(".w>:checked").val(),a=200==i?"b":"span",l=o.find(".jegy").eq(-1).parent(),c=l[0];c.innerHTML+=` <${a} tooltip = 'Milenne ha-val hozzáadott jegy&#xa;Súly: ${i}%' class='milenne jegy'> ${n}</${a}> `,Y(o),t.close(),l.parent().addClass("open"),intoView(c)}})}ga("pageview");let f=$("#gdpr");if(f.is()&&Modal(f,{opacity:0,dismissible:!1,preventScrolling:!1,onClose:function(){addCookie("gdpr")}}).open(),$(".pwa").is()){let e;$(t).on("beforeinstallprompt",t=>{t.preventDefault(),e=t,$(".pwa").css({display:"inline-block"}).on("click",()=>{e.prompt(),ga("event",{ec:"installprompt",ea:"fired"}),e.userChoice.then(t=>{"accepted"===t.outcome?(addCookie("pwa",1),console.log("User accepted the A2HS prompt")):(addCookie("pwa",0),console.log("User dismissed the A2HS prompt")),e=null,ga("event",{ec:"installprompt",ea:t.outcome,el:t.platform})})})})}}t.scrolling=!1,$(()=>{e?D():M&&($preloadOnMousedown=!0,e=p(location.href),a[e]={body:document.body,title:document.title,scrollY:pageYOffset},k(),$(t).on("popstate",function(){var t=p(location.href);if(t!=e){if(!(t in a)){if(t==location.href)return void(location.href=location.href);location.reload()}a[e].scrollY=pageYOffset,e=t,v(a[t].title,a[t].body,t,a[t].scrollY)}}));let n=performance.timing,o=n.navigationStart;ga("timing",{clt:n.domContentLoadedEventStart-o,dit:n.domInteractive-o,ni:1})}),$(t).on("resize",T).on("scroll",O).on("mousemove","[tooltip]",function(){$(this).toggleClass("bot",$(this).offset().top-scrollY-getComputedStyle(this,":after").getPropertyValue("height").replace("px","")-76<=0)}).on("dblclick",".milenne",function(){let t=$(this),e=t.closest("nr");t.remove(),Y(e)}).on("error",function(t){ga("exception",{exd:t.error&&t.error.stack||`${t.message}; ${t.lineno}: ${t.colno} `})}).on("click","nr nd:first-child",function(t){$(this).closest("nr").toggleClass("open")}).on("appinstalled",()=>{addCookie("pwa")})}(this);