function getf(e,t){xhr=new XMLHttpRequest,xhr.open("GET",e),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.onload=function(){200===xhr.status&&xhr.responseText&&t(xhr.responseText)},xhr.send()}function s(){if(location.href.match(/\/orarend/g)){window.mh=0,$(".collection-item").css("height","unset");for(let e=$("ul"),t=0;e.length;e=$("ul.collection li:nth-child("+ ++t+")")){if(0==t)continue;let o=0;e.each(e=>{o=Math.max($(e).height(),o)}),e.css("height",o+"px")}}}function init(){let e=$(location.hash);e.length&&requestAnimationFrame(()=>{e[0].scrollIntoView()});var t,o,n=$("#menu");$(".overlay").on("click",function(){$("body").removeClass("no-scroll"),n.removeClass("open").on("transitionend",a,!1)}),n.on("transitionend",a);var i=$("body");function l(){$("body").addClass("no-scroll"),n.addClass("open")}function a(){t<30&&(l(),n.on("transitionend",a,!1))}if(i.on("touchstart",function(e){t=e.changedTouches[0].pageX,o=t},!1),i.on("touchmove",function(e){o=e.touches[0].pageX,t<30&&o>50&&l()},!1),$("#mo").on("click",()=>{l()}),location.href.match(/\/orarend/g)){s();var c=$("#modal"),r=Modal(c);$(".lesson").on("click",function(e){$("#modal span").html("-");let t=$(this),o=t.find("b");c.find(".modal-content>span").html(o.is(".em")?"Elmarad!":"");let n=t.find("i");$(["lecke","time","theme"]).each(function(e){let t=n.attr(`data-${e}`);t&&c.find(`[data-${e}]`).html(t)}),c.find("[data-nth]").html(t.parent().attr("data-nth")),c.find("[data-tr]").html(o.html()),c.find("[data-teacher]").html(n.html()),c.find("[data-room]").html(t.find(".secondary-content").html()),r.open()})}Collapsible($(".collapsible")),location.href.match(/\/jegyek/g)&&e.closest("ntr").addClass("open"),$("[tooltip]").on("mouseenter",function(){$(this).toggleClass("bot",$(this).offset().top-window.scrollY-window.getComputedStyle(this,":after").getPropertyValue("height").replace("px","")-20<=0)})}function addCookie(e){var t=new Date;t.setDate(t.getDate()+365),document.cookie=`${e}=1;expires=${t.toUTCString()};path=/`}$(window).on("resize",s),location.href.match(/^(?=.*\/login)(?!.*(toldy|sch)).*/g)&&getf("schools",function(e){e=JSON.parse(e);let t=$("#sc"),o=t[0].list?$("#slc"):$("#rslc"),n=o.find("selected");n.length&&(n=n.val()),o.html(""),$(e).each(function(){o.append('<option value="'+this.v+'"'+(n==this.v?(n="","selected"):"")+">"+this.n+"</option>")}),t.on("blur",function(){if(!this.value)return;$("option[value="+this.value+"]").length?(this.setCustomValidity(""),M.validate_field($("#sc"))):this.setCustomValidity("Adjon meg egy érvényes értéket")})}),$.fn.ready(()=>{ic.on("change",init),ic.init("mousedown")});let g=$("#gdpr");g.length&&Modal(g,{opacity:0,dismissible:!1,preventScrolling:!1,onCloseEnd:function(){addCookie("gdpr")}}).open(),"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js",{scope:"/"}).then(function(){console.log("Service Worker Registered")});let p=$("#pwa");if(p.length){let e;window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),e=t,Modal(p,{opacity:0,preventScrolling:!1}).open(),$("#pwa-btn").on("click",()=>{e.prompt(),e.userChoice.then(t=>{"accepted"===t.outcome?(addCookie("pwa"),console.log("User accepted the A2HS prompt")):console.log("User dismissed the A2HS prompt"),e=null})})})}